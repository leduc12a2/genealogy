name: run-app-expo
on:
  push:
     branches: [main]
jobs:
    install-dependencies:
            runs-on: ubuntu-latest
            steps:
                - name: ğŸ— Setup repo
                  uses: actions/checkout@v3

                - name: ğŸ— Setup Node
                  uses: actions/setup-node@v3
                  with:
                    node-version: 18.x
                    cache: yarn

                - name: ğŸ“¦ Install dependencies
                  run: yarn install

                - name: ğŸ“¦ Fix expo
                  run: npx expo install --fix
                  
                - name: ğŸš€ prebuild
                  run: npx expo prebuild --platform android

                - name: ğŸš€ Build app
                  run: cd android && ./gradlew assembleRelease

                - name: Upload APK
                    uses: actions/upload-artifact@v2
                    with:
                      name: app-release
                      path: app/build/outputs/apk/release/app-release.apk


